# TipTyp

> Тренажёр слепой печати: проверь скорость набора, веди статистику, настрой темы и шрифты.  
> Интерфейс на русском и английском.

---

## О проекте

TipTyp — веб-приложение для тренировки набора текста. Запускаешь тест, набираешь слова, смотришь результат: скорость (слова и знаки в минуту), точность. Можно заниматься без регистрации или завести аккаунт — тогда сохраняется история попыток и настраивается профиль с аватаром, темами и шрифтами.

Переходы по разделам (Тест, Профиль, Войти) происходят без перезагрузки страницы. Всё адаптивно: удобно и на телефоне, и на большом экране.

---

## Что умеет

- **Тест на скорость** — таймер от первого нажатия, подсветка правильных и ошибочных символов, в реальном времени показываются WPM (слов/мин), CPM (знаков/мин) и точность.
- **Три режима слов** — осмысленные слова из словаря, генерация своей моделью (n-граммы) или псевдослова из слогов.
- **Профиль** — аватар, никнейм, вкладки: главное (настройки), статистика, темы, шрифты. Выбранный шрифт применяется только в блоке набора текста, не по всему сайту.
- **Темы** — 50 тёмных и 50 светлых; выбор сохраняется в браузере.
- **Шрифты** — список из Google Fonts (более 1200), поиск по имени, выбор сохраняется и подгружается на странице теста.
- **Учётные записи** — регистрация и вход; логин один на пользователя (без учёта регистра), пароли хранятся только в виде хеша (PBKDF2-SHA256).
- **Статистика** — для авторизованных пользователей: история попыток, лучший и средний WPM.
- **Мягкая навигация** — клик по ссылкам в шапке подгружает страницу без полной перезагрузки.

Перезапуск теста: **Tab** или **Ctrl+Enter**.

---

## Стек

| Часть | Технологии |
|-------|------------|
| Backend | Python 3.10+, Flask 3, Flask-Login, Flask-SQLAlchemy |
| База данных | SQLite |
| Безопасность | Хеширование паролей, валидация логина (уникальность без учёта регистра) |
| Фронтенд | HTML, CSS, JS без сборки; темы на CSS-переменных; шрифты — Google Fonts CSS2 API |
| Генерация слов | Встроенный словарь, n-граммная модель (pickle), слоги |

---

## Установка и запуск

Нужны **Python 3.10+** и **pip**.

```bash
# Клонирование
git clone https://github.com/GoreWorste/tiptop
cd tiptop

# Виртуальное окружение (рекомендуется)
python -m venv venv
# Windows:
venv\Scripts\activate
# Linux / macOS:
source venv/bin/activate

# Зависимости
pip install -r requirements.txt

# Запуск
python app.py
```

Открой в браузере: **http://127.0.0.1:5000**

При первом запуске создаётся файл БД `tiptyp.db` и при необходимости обучается модель слов (файлы появляются в `instance/`). Папку для данных и аватарок можно задать переменной окружения **TIPTYP_DATA**.

---

## Запуск в Docker

Установи [Docker](https://docs.docker.com/get-docker/) и [Docker Compose](https://docs.docker.com/compose/install/). В корне проекта:

```bash
docker compose up -d
```

Сайт будет доступен по **http://localhost:5000**. С других устройств в той же сети — по адресу **http://\<IP-вашего-ПК\>:5000**. Данные (БД и аватарки) хранятся в папке проекта и сохраняются после `docker compose down`.

---

## Обновление после деплоя

1. На сервере подтяни код: `git pull` (или залей обновлённые файлы).
2. Перезапусти приложение: снова запусти `python app.py` или выполни `docker compose restart`.
3. В браузере обнови страницу без кэша: **Ctrl+Shift+R** или **Ctrl+F5**.
4. Внизу страницы отображается метка сборки (например `· dev`). Через переменную окружения **TIPTYP_BUILD_ID** можно задать свою метку (дата, хеш коммита) и по ней проверять, что отдаётся новая версия.

---

## Структура репозитория

```
tiptop/
├── app.py                  # Flask-приложение: маршруты, модели, логирование
├── word_generator.py       # Режимы генерации слов (словарь, модель, слоги)
├── word_model.py           # N-граммная модель
├── train_word_model.py     # Скрипт переобучения модели
├── requirements.txt
├── Dockerfile
├── docker-compose.yml
├── templates/              # Шаблоны: base, index, profile, login, register, stats, themes
├── static/                 # CSS, JS, список шрифтов (fonts-list.json)
├── scripts/
│   ├── generate_themes.py  # Генерация CSS-файла тем
│   └── filter_google_fonts.py  # Фильтрация fonts-list.json по каталогу Google Fonts
└── instance/               # БД и артефакты модели (создаётся при первом запуске)
```

Аватарки пользователей сохраняются в каталоге **avatars/** (или в **TIPTYP_DATA/avatars**, если задана переменная окружения).

---

## Лицензия

Проект можно использовать и дорабатывать по своему усмотрению. Конкретная лицензия указана в репозитории.

---

**с ❤️ от GoreWorste**
