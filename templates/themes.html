{% extends "base.html" %}
{% block title %}{% if lang == 'en' %}Themes — TipTyp{% else %}Темы — TipTyp{% endif %}{% endblock %}
{% block content %}
<div class="themes-page">
    <h1>{% if lang == 'en' %}Themes{% else %}Темы{% endif %}</h1>
    <p class="themes-intro">{% if lang == 'en' %}Choose a theme. It will be saved and applied across the site.{% else %}Выберите тему — она сохранится и будет действовать на всём сайте.{% endif %}</p>

    <section class="themes-section">
        <h2>{% if lang == 'en' %}Dark (50){% else %}Тёмные (50){% endif %}</h2>
        <div class="themes-grid" id="themesDark">
            {% for n in range(1, 51) %}
            <button type="button" class="theme-card" data-theme="dark{{ n }}" title="Dark {{ n }}">
                <span class="theme-card-preview theme-card-preview-dark"></span>
                <span class="theme-card-label">{{ n }}</span>
            </button>
            {% endfor %}
        </div>
    </section>

    <section class="themes-section">
        <h2>{% if lang == 'en' %}Light (50){% else %}Светлые (50){% endif %}</h2>
        <div class="themes-grid" id="themesLight">
            {% for n in range(1, 51) %}
            <button type="button" class="theme-card" data-theme="light{{ n }}" title="Light {{ n }}">
                <span class="theme-card-preview theme-card-preview-light"></span>
                <span class="theme-card-label">{{ n }}</span>
            </button>
            {% endfor %}
        </div>
    </section>
</div>
<script>
(function() {
    var STORAGE_KEY = 'tiptyp_theme';
    function setTheme(id) {
        document.body.dataset.theme = id;
        try { localStorage.setItem(STORAGE_KEY, id); } catch (e) {}
        document.querySelectorAll('.theme-card.active').forEach(function(el) { el.classList.remove('active'); });
        var card = document.querySelector('.theme-card[data-theme="' + id + '"]');
        if (card) card.classList.add('active');
    }
    var stored = '';
    try { stored = localStorage.getItem(STORAGE_KEY) || 'dark1'; } catch (e) { stored = 'dark1'; }
    if (document.body.dataset.theme) stored = document.body.dataset.theme;
    setTheme(stored);
    document.querySelectorAll('.theme-card').forEach(function(btn) {
        btn.addEventListener('click', function() {
            setTheme(this.getAttribute('data-theme'));
        });
    });
})();
</script>
{% endblock %}
